# 个人待办 TodoList（纯前端版）

一个零依赖、开箱即用的单文件待办应用。双击 `todo.html` 即可在浏览器中使用，数据保存在本地浏览器 `localStorage`。

## 功能特性

- 添加 / 编辑 / 删除待办
- 优先级 1-4 徽章（“紧急(1)”在未完成时轻微脉冲动画提示）
- 截止时间（支持顺延 +1 天）
- 标签输入与常用标签建议（Top 10）
- 搜索、过滤（状态/优先级）、排序（创建时间/优先级/截止/标题）
- 显示/隐藏已完成
- 看板仪表盘：
  - 完成率（进度条）
  - 优先级分布（条形图）
  - 标签占比（Top 8，若无标签显示“暂无标签”）
  - 即将到期（24 小时内，列表可滚动）
  - 已超期（数量 + 列表，列表可滚动）
- 导入 / 导出 JSON 备份
- 深色 / 浅色主题
- Toast 与系统通知（到期/30 分钟前提醒，需授权）

## 使用说明

- 启动：
  - 直接双击 `todo.html` 用浏览器打开即可使用
  - 右上角可切换主题（light / dark）
- 添加：
  - 填写“标题”，可选“优先级/截止时间/标签/备注”，点击“添加”
  - 标签输入框按 Enter 或点“新增”可加入一个标签
- 编辑：
  - 双击任务标题进入编辑，或点击每项右侧“编辑”按钮
  - 编辑后点“保存”，或点“取消编辑”退出
- 完成/删除/顺延：
  - 勾选左侧复选框标记完成；“删除”删除该项；“+1天”将截止时间顺延一天
- 搜索/过滤/排序：
  - 顶部工具栏提供关键字搜索、状态/优先级过滤、排序方式
  - 可切换“显示/隐藏已完成”
- 导入/导出：
  - 右侧按钮可导出 JSON 备份或从 JSON 导入

## 快捷键

- Ctrl + /：聚焦到搜索框
- Ctrl + Enter：当光标在“标题”输入框时快速提交
- Enter：在“标签”输入框中快速新增标签

## 通知提醒

- 点击“启用通知”并允许浏览器通知权限
- 应用会：
  - 距截止 30 分钟提醒一次（仅当之前未提醒）
  - 到期时提醒一次（若页面被节流导致错过 30 分钟提醒，也会补发到期提醒）
- 说明：浏览器后台/最小化/系统休眠会节流或暂停页面计时器，提醒可能延迟；恢复前台后会自动补发并刷新 UI。

## 数据与隐私

- 所有数据仅保存在本地浏览器的 `localStorage`：
  - 任务：`todoListV1`
  - 主题：`todoThemeV1`
- 无任何网络请求，导出/导入均在本地完成

## 浏览器兼容与限制

- 建议使用最新版 Chrome/Edge/Firefox
- 直接用 `file://` 打开时，部分浏览器对通知权限更严格，建议使用 `http(s)://` 或 `localhost` 打开以获得更好支持
- 网页在后台会被节流，无法像原生应用那样绝对准点提醒（本应用已实现前台更短轮询与补偿提醒）

## 自定义与技巧

- 列表滚动高度：
  - 任务列表：`#taskList { max-height: 420px; overflow: auto; }`
  - 即将到期：`#dueSoonList { max-height: 360px; overflow: auto; }`
  - 已超期：`#overdueList { max-height: 360px; overflow: auto; }`
- 紧急动画（未完成时）：`.item:not(.done) .badge-pri-1 { animation: ... }`，可在 CSS 中关闭
- 提醒轮询间隔（前台 15s / 后台 60s）：在 `scheduleDueReminders()` 内可调整
- 主题色/风格：顶部 `:root` 与 `body[data-theme="light"]` 变量可快速统一调整

## 导出 JSON 示例

```json
{
  "version": 1,
  "exportedAt": "2025-01-01T12:34:56.000Z",
  "tasks": [
    {
      "id": "t_abc",
      "title": "示例任务",
      "priority": 2,
      "dueDate": "2025-01-02T09:00:00.000Z",
      "tags": ["work", "frontend"],
      "note": "一些备注",
      "done": false,
      "reminded30": false,
      "createdAt": 1735718400000,
      "updatedAt": 1735718400000
    }
  ]
}
```

## 常见问题（FAQ）

- 看板不更新或提醒延迟？
  - 浏览器后台/系统休眠会节流，恢复前台时会自动刷新并补发到期提醒
  - 确认已点击“启用通知”并授予权限
- 暗色主题下控件不跟随？
  - 已适配日期时间控件与下拉控件图标颜色；若遇到定制浏览器差异，可在 CSS 中按需调整

## 作为桌面应用（可选）

若需更稳定、准点的提醒，建议打包为桌面应用（如 Electron/Tauri），或做成浏览器扩展使用系统级定时 API。若你需要，我可以基于当前文件为你生成 Electron 项目与一键打包配置。 
